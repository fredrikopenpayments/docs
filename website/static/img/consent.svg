<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="4251px" preserveAspectRatio="none" style="width:1016px;height:4251px;" version="1.1" viewBox="0 0 1016 4251" width="1016px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="451.75" y="23.5352">Consent Service</text><rect fill="#FFFFFF" height="8" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="2520.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="2520.5469" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="2520.5469" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="2520.5469" y2="2520.5469"/><rect fill="#FFFFFF" height="21.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="2556.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="2556.5469" y2="2577.8574"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="2556.5469" y2="2577.8574"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="2577.8574" y2="2577.8574"/><rect fill="#FFFFFF" height="8" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="3359.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="3359.0605" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="3359.0605" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="3359.0605" y2="3359.0605"/><rect fill="#FFFFFF" height="21.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="3395.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="3395.0605" y2="3416.3711"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="3395.0605" y2="3416.3711"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="3416.3711" y2="3416.3711"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="159.5977"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="442.0137"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="693.8086"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="945.6035"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="1197.3984"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="1464.5039"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="1716.2988"/><rect fill="#FFFFFF" height="545.1426" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="79.5" y="1983.4043"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="79.5" y1="1983.4043" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="89.5" y1="1983.4043" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="89.5" y1="1983.4043" y2="1983.4043"/><rect fill="#FFFFFF" height="810.5137" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="79.5" y="2556.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="79.5" y1="2556.5469" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="89.5" y1="2556.5469" y2="3367.0605"/><rect fill="#FFFFFF" height="95.2422" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="79.5" y="3395.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="79.5" y1="3395.0605" y2="3490.3027"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="89.5" y1="3395.0605" y2="3490.3027"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="89.5" y1="3490.3027" y2="3490.3027"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="3672.8105"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="3978.916"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="442.0137"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="693.8086"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="945.6035"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="1197.3984"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="1464.5039"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="1716.2988"/><rect fill="#FFFFFF" height="148.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="1983.4043"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="3672.8105"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="3978.916"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="837.5" y="159.5977"/><rect fill="#FFFFFF" height="139.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="837.5" y="2322.752"/><rect fill="#FFFFFF" height="44.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="837.5" y="2607.168"/><rect fill="#FFFFFF" height="179.4844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="837.5" y="2760.3418"/><rect fill="#FFFFFF" height="139.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="837.5" y="3161.2656"/><rect fill="#FFFFFF" height="44.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="837.5" y="3445.6816"/><rect fill="#FFFFFF" height="37.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="961.5" y="2491.2363"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="961.5" y1="2491.2363" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="971.5" x2="971.5" y1="2491.2363" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="971.5" y1="2491.2363" y2="2491.2363"/><rect fill="#FFFFFF" height="50.6211" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="961.5" y="2556.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="961.5" y1="2556.5469" y2="2607.168"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="971.5" x2="971.5" y1="2556.5469" y2="2607.168"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="971.5" y1="2607.168" y2="2607.168"/><rect fill="#FFFFFF" height="37.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="961.5" y="3329.75"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="961.5" y1="3329.75" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="971.5" x2="971.5" y1="3329.75" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="971.5" y1="3329.75" y2="3329.75"/><rect fill="#FFFFFF" height="50.6211" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="961.5" y="3395.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="961.5" y1="3395.0605" y2="3445.6816"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="971.5" x2="971.5" y1="3395.0605" y2="3445.6816"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="971.5" y1="3445.6816" y2="3445.6816"/><rect fill="#FFFFFF" height="1683.7852" style="stroke: #000000; stroke-width: 2.0;" width="991.5" x="13" y="2226.5098"/><rect fill="#FFFFFF" height="504.5449" style="stroke: none; stroke-width: 1.0;" width="991.5" x="13" y="3067.3789"/><rect fill="#FFFFFF" height="338.3711" style="stroke: none; stroke-width: 1.0;" width="991.5" x="13" y="3571.9238"/><rect fill="#FFFFFF" height="284.416" style="stroke: #000000; stroke-width: 2.0;" width="701.5" x="55" y="3593.8789"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39" x2="39" y1="112.9766" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="39" x2="39" y1="2528.5469" y2="2556.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39" x2="39" y1="2556.5469" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="39" x2="39" y1="3367.0605" y2="3395.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39" x2="39" y1="3395.0605" y2="4163.7793"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="84" x2="84" y1="112.9766" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="84" x2="84" y1="2528.5469" y2="2556.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="84" x2="84" y1="2556.5469" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="84" x2="84" y1="3367.0605" y2="3395.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="84" x2="84" y1="3395.0605" y2="4163.7793"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="660.5" x2="660.5" y1="112.9766" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="660.5" x2="660.5" y1="2528.5469" y2="2556.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="660.5" x2="660.5" y1="2556.5469" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="660.5" x2="660.5" y1="3367.0605" y2="3395.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="660.5" x2="660.5" y1="3395.0605" y2="4163.7793"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842.5" x2="842.5" y1="112.9766" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="842.5" x2="842.5" y1="2528.5469" y2="2556.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842.5" x2="842.5" y1="2556.5469" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="842.5" x2="842.5" y1="3367.0605" y2="3395.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842.5" x2="842.5" y1="3395.0605" y2="4163.7793"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="966.5" y1="112.9766" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="966.5" x2="966.5" y1="2528.5469" y2="2556.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="966.5" y1="2556.5469" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="966.5" x2="966.5" y1="3367.0605" y2="3395.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="966.5" y1="3395.0605" y2="4163.7793"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="23" y="110.0234">PSU</text><ellipse cx="39" cy="43.4883" fill="#FEFECE" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M39,51.4883 L39,78.4883 M26,59.4883 L52,59.4883 M39,78.4883 L26,93.4883 M39,78.4883 L52,93.4883 " fill="none" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="23" y="4176.3145">PSU</text><ellipse cx="39" cy="4189.2676" fill="#FEFECE" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M39,4197.2676 L39,4224.2676 M26,4205.2676 L52,4205.2676 M39,4224.2676 L26,4239.2676 M39,4224.2676 L52,4239.2676 " fill="none" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="39" x="65" y="81.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="25" x="72" y="102.0234">TPP</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="39" x="65" y="4162.7793"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="25" x="72" y="4183.3145">TPP</text><rect fill="#FEFECE" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="172" x="574.5" y="65"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="158" x="581.5" y="85.5352">Open Banking Platform</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="22" x="649.5" y="102.0234">API</text><rect fill="#FEFECE" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="172" x="574.5" y="4162.7793"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="158" x="581.5" y="4183.3145">Open Banking Platform</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="22" x="649.5" y="4199.8027">API</text><rect fill="#FEFECE" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="172" x="756.5" y="65"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="158" x="763.5" y="85.5352">Open Banking Platform</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="826" y="102.0234">Auth</text><rect fill="#FEFECE" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="172" x="756.5" y="4162.7793"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="158" x="763.5" y="4183.3145">Open Banking Platform</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="826" y="4199.8027">Auth</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="938.5" y="81.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="945.5" y="102.0234">ASPSP</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="938.5" y="4162.7793"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="945.5" y="4183.3145">ASPSP</text><rect fill="#FFFFFF" height="8" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="2520.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="2520.5469" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="2520.5469" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="2520.5469" y2="2520.5469"/><rect fill="#FFFFFF" height="21.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="2556.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="2556.5469" y2="2577.8574"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="2556.5469" y2="2577.8574"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="2577.8574" y2="2577.8574"/><rect fill="#FFFFFF" height="8" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="3359.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="3359.0605" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="3359.0605" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="3359.0605" y2="3359.0605"/><rect fill="#FFFFFF" height="21.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="3395.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="3395.0605" y2="3416.3711"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="3395.0605" y2="3416.3711"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="3416.3711" y2="3416.3711"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="159.5977"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="442.0137"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="693.8086"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="945.6035"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="1197.3984"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="1464.5039"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="1716.2988"/><rect fill="#FFFFFF" height="545.1426" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="79.5" y="1983.4043"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="79.5" y1="1983.4043" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="89.5" y1="1983.4043" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="89.5" y1="1983.4043" y2="1983.4043"/><rect fill="#FFFFFF" height="810.5137" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="79.5" y="2556.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="79.5" y1="2556.5469" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="89.5" y1="2556.5469" y2="3367.0605"/><rect fill="#FFFFFF" height="95.2422" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="79.5" y="3395.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="79.5" y1="3395.0605" y2="3490.3027"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="89.5" y1="3395.0605" y2="3490.3027"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="89.5" y1="3490.3027" y2="3490.3027"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="3672.8105"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="3978.916"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="442.0137"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="693.8086"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="945.6035"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="1197.3984"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="1464.5039"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="1716.2988"/><rect fill="#FFFFFF" height="148.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="1983.4043"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="3672.8105"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="655.5" y="3978.916"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="837.5" y="159.5977"/><rect fill="#FFFFFF" height="139.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="837.5" y="2322.752"/><rect fill="#FFFFFF" height="44.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="837.5" y="2607.168"/><rect fill="#FFFFFF" height="179.4844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="837.5" y="2760.3418"/><rect fill="#FFFFFF" height="139.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="837.5" y="3161.2656"/><rect fill="#FFFFFF" height="44.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="837.5" y="3445.6816"/><rect fill="#FFFFFF" height="37.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="961.5" y="2491.2363"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="961.5" y1="2491.2363" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="971.5" x2="971.5" y1="2491.2363" y2="2528.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="971.5" y1="2491.2363" y2="2491.2363"/><rect fill="#FFFFFF" height="50.6211" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="961.5" y="2556.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="961.5" y1="2556.5469" y2="2607.168"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="971.5" x2="971.5" y1="2556.5469" y2="2607.168"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="971.5" y1="2607.168" y2="2607.168"/><rect fill="#FFFFFF" height="37.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="961.5" y="3329.75"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="961.5" y1="3329.75" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="971.5" x2="971.5" y1="3329.75" y2="3367.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="971.5" y1="3329.75" y2="3329.75"/><rect fill="#FFFFFF" height="50.6211" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="961.5" y="3395.0605"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="961.5" y1="3395.0605" y2="3445.6816"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="971.5" x2="971.5" y1="3395.0605" y2="3445.6816"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="971.5" y1="3445.6816" y2="3445.6816"/><polygon fill="#A80036" points="825.5,155.5977,835.5,159.5977,825.5,163.5977,829.5,159.5977" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="831.5" y1="159.5977" y2="159.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="69" x="96.5" y="139.5449">Get Token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="96.5" y="154.8555">POST /connect/token</text><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="103" x="94" y="172.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="98" y="189.166">B: client_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="98" y="204.4766">B: client_secret</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="98" y="219.7871">B: grant_type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="98" y="235.0977">B: scope</text><polygon fill="#A80036" points="95.5,273.8398,85.5,277.8398,95.5,281.8398,91.5,277.8398" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="841.5" y1="277.8398" y2="277.8398"/><rect fill="#FBFB77" height="84" style="stroke: #A80036; stroke-width: 1.0;" width="108" x="729" y="290.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="733" y="307.4082">HTTP 200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="733" y="322.7188">B: access_token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="733" y="338.0293">B: expires_in</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="733" y="353.3398">B: token_type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="733" y="368.6504">B: scope</text><polygon fill="#A80036" points="643.5,438.0137,653.5,442.0137,643.5,446.0137,647.5,442.0137" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="649.5" y1="442.0137" y2="442.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103" x="96.5" y="421.9609">Create Consent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="96.5" y="437.2715">POST /psd2/consent/v1/consents</text><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="94" y="455.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="98" y="471.582">H: Authorization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="486.8926">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="502.2031">H: X-BicFi</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="98" y="517.5137">B: consents</text><polygon fill="#A80036" points="95.5,556.2559,85.5,560.2559,95.5,564.2559,91.5,560.2559" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="659.5" y1="560.2559" y2="560.2559"/><rect fill="#FBFB77" height="53" style="stroke: #A80036; stroke-width: 1.0;" width="172" x="483" y="573.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="487" y="589.8242">HTTP 201</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="487" y="605.1348">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="487" y="620.4453">B: consentsResponse-201</text><polygon fill="#A80036" points="643.5,689.8086,653.5,693.8086,643.5,697.8086,647.5,693.8086" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="649.5" y1="693.8086" y2="693.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="141" x="96.5" y="673.7559">Get Consent Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="96.5" y="689.0664">GET /psd2/consent/v1/consents/{consentId}</text><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="94" y="706.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="723.377">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="98" y="738.6875">H: Authorization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="753.998">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="769.3086">H: X-BicFi</text><polygon fill="#A80036" points="95.5,808.0508,85.5,812.0508,95.5,816.0508,91.5,812.0508" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="659.5" y1="812.0508" y2="812.0508"/><rect fill="#FBFB77" height="53" style="stroke: #A80036; stroke-width: 1.0;" width="273" x="382" y="825.0508"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="386" y="841.6191">HTTP 200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="386" y="856.9297">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="265" x="386" y="872.2402">B: consentInformationResponse-200_json</text><polygon fill="#A80036" points="643.5,941.6035,653.5,945.6035,643.5,949.6035,647.5,945.6035" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="649.5" y1="945.6035" y2="945.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="159" x="96.5" y="925.5508">Consent Status Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="332" x="96.5" y="940.8613">GET /psd2/consent/v1/consents/{consentId}/status</text><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="94" y="958.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="975.1719">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="98" y="990.4824">H: Authorization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="1005.793">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="1021.1035">H: X-BicFi</text><polygon fill="#A80036" points="95.5,1059.8457,85.5,1063.8457,95.5,1067.8457,91.5,1063.8457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="659.5" y1="1063.8457" y2="1063.8457"/><rect fill="#FBFB77" height="53" style="stroke: #A80036; stroke-width: 1.0;" width="204" x="451" y="1076.8457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="455" y="1093.4141">HTTP 200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="455" y="1108.7246">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="455" y="1124.0352">B: consentStatusResponse-200</text><polygon fill="#A80036" points="643.5,1193.3984,653.5,1197.3984,643.5,1201.3984,647.5,1197.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="649.5" y1="1197.3984" y2="1197.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="241" x="96.5" y="1177.3457">Start Consent Authorisation Process</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="392" x="96.5" y="1192.6563">POST /psd2/consent/v1/consents/{consentId}/authorisations</text><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="94" y="1210.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="1226.9668">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="98" y="1242.2773">H: Authorization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="1257.5879">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="1272.8984">H: X-BicFi</text><polygon fill="#A80036" points="95.5,1311.6406,85.5,1315.6406,95.5,1319.6406,91.5,1315.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="659.5" y1="1315.6406" y2="1315.6406"/><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="182" x="473" y="1328.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="477" y="1345.209">HTTP 201</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="477" y="1360.5195">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="477" y="1375.8301">H: ASPSP-SCA-Approach</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="477" y="1391.1406">B: startScaprocessResponse</text><polygon fill="#A80036" points="643.5,1460.5039,653.5,1464.5039,643.5,1468.5039,647.5,1464.5039" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="649.5" y1="1464.5039" y2="1464.5039"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="343" x="96.5" y="1444.4512">Get Consent Authorisation Sub-Resources Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="384" x="96.5" y="1459.7617">GET /psd2/consent/v1/consents/{consentId}/authorisations</text><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="94" y="1477.5039"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="1494.0723">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="98" y="1509.3828">H: Authorization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="1524.6934">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="1540.0039">H: X-BicFi</text><polygon fill="#A80036" points="95.5,1578.7461,85.5,1582.7461,95.5,1586.7461,91.5,1582.7461" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="659.5" y1="1582.7461" y2="1582.7461"/><rect fill="#FBFB77" height="53" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="541" y="1595.7461"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="545" y="1612.3145">HTTP 200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="545" y="1627.625">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="545" y="1642.9355">B: authorisations</text><polygon fill="#A80036" points="643.5,1712.2988,653.5,1716.2988,643.5,1720.2988,647.5,1716.2988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="649.5" y1="1716.2988" y2="1716.2988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="264" x="96.5" y="1696.2461">Read Consent Authorisation SCA Status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="547" x="96.5" y="1711.5566">GET /psd2/consent/v1/consents/{consentId}/authorisations/{consentAuthorisationId}</text><rect fill="#FBFB77" height="84" style="stroke: #A80036; stroke-width: 1.0;" width="171" x="94" y="1729.2988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="1745.8672">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="98" y="1761.1777">P: consentAuthorisationId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="98" y="1776.4883">H: Authorization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="1791.7988">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="1807.1094">H: X-BicFi</text><polygon fill="#A80036" points="95.5,1845.8516,85.5,1849.8516,95.5,1853.8516,91.5,1849.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="659.5" y1="1849.8516" y2="1849.8516"/><rect fill="#FBFB77" height="53" style="stroke: #A80036; stroke-width: 1.0;" width="143" x="512" y="1862.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="516" y="1879.4199">HTTP 200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="516" y="1894.7305">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="516" y="1910.041">B: scaStatusResponse</text><polygon fill="#A80036" points="643.5,1979.4043,653.5,1983.4043,643.5,1987.4043,647.5,1983.4043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="649.5" y1="1983.4043" y2="1983.4043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="113" x="96.5" y="1963.3516">Update PSU Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="547" x="96.5" y="1978.6621">PUT /psd2/consent/v1/consents/{consentId}/authorisations/{consentAuthorisationId}</text><rect fill="#FBFB77" height="99" style="stroke: #A80036; stroke-width: 1.0;" width="222" x="94" y="1996.4043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="2012.9727">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="98" y="2028.2832">P: consentAuthorisationId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="98" y="2043.5938">H: Authorization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="2058.9043">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="2074.2148">H: X-BicFi</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="98" y="2089.5254">B: selectPsuAuthenticationMethod</text><polygon fill="#A80036" points="100.5,2128.2676,90.5,2132.2676,100.5,2136.2676,96.5,2132.2676" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="94.5" x2="659.5" y1="2132.2676" y2="2132.2676"/><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="282" x="373" y="2145.2676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="377" y="2161.8359">HTTP 200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="377" y="2177.1465">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="377" y="2192.457">H: ASPSP-SCA-Approach</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="274" x="377" y="2207.7676">B: selectPsuAuthenticationMethodResponse</text><path d="M13,2226.5098 L75,2226.5098 L75,2233.5098 L65,2243.5098 L13,2243.5098 L13,2226.5098 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1683.7852" style="stroke: #000000; stroke-width: 2.0;" width="991.5" x="13" y="2226.5098"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="28" y="2240.0781">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="90" y="2239.1445">[scaOAuth]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="131.5" y1="2265.1309" y2="2265.1309"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="131.5" x2="131.5" y1="2265.1309" y2="2278.1309"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="90.5" x2="131.5" y1="2278.1309" y2="2278.1309"/><polygon fill="#A80036" points="100.5,2274.1309,90.5,2278.1309,100.5,2282.1309,96.5,2278.1309" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="540" x="96.5" y="2260.3887">Process selectPsuAuthenticationMethodResponse._links.scaOAuth.href template</text><polygon fill="#A80036" points="825.5,2318.752,835.5,2322.752,825.5,2326.752,829.5,2322.752" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="831.5" y1="2322.752" y2="2322.752"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="96.5" y="2302.6992">Call authlink</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="96.5" y="2318.0098">GET /connect/authorize</text><rect fill="#FBFB77" height="99" style="stroke: #A80036; stroke-width: 1.0;" width="117" x="94" y="2335.752"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="98" y="2352.3203">Q: client_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="98" y="2367.6309">Q: scope</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="98" y="2382.9414">Q: response_type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="98" y="2398.252">Q: redirect_uri</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="98" y="2413.5625">Q: state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="98" y="2428.873">Q: acr_values</text><polygon fill="#A80036" points="100.5,2457.9258,90.5,2461.9258,100.5,2465.9258,96.5,2461.9258" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="94.5" x2="841.5" y1="2461.9258" y2="2461.9258"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="106.5" y="2457.1836">Redirect to ASPSP</text><polygon fill="#A80036" points="949.5,2487.2363,959.5,2491.2363,949.5,2495.2363,953.5,2491.2363" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="955.5" y1="2491.2363" y2="2491.2363"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="159" x="96.5" y="2486.4941">Follow authlink redirect</text><polygon fill="#A80036" points="949.5,2516.5469,959.5,2520.5469,949.5,2524.5469,953.5,2520.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="955.5" y1="2520.5469" y2="2520.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="51" y="2515.8047">Start PSU authentication</text><polygon fill="#A80036" points="50,2573.8574,40,2577.8574,50,2581.8574,46,2577.8574" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="960.5" y1="2577.8574" y2="2577.8574"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="56" y="2573.1152">End PSU authentication</text><polygon fill="#A80036" points="858.5,2603.168,848.5,2607.168,858.5,2611.168,854.5,2607.168" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="852.5" x2="965.5" y1="2607.168" y2="2607.168"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="864.5" y="2602.4258">Auth result</text><polygon fill="#A80036" points="100.5,2647.7891,90.5,2651.7891,100.5,2655.7891,96.5,2651.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="94.5" x2="841.5" y1="2651.7891" y2="2651.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="106.5" y="2631.7363">TPP Callback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="106.5" y="2647.0469">GET [TPP Redirect URI]</text><rect fill="#FBFB77" height="53" style="stroke: #A80036; stroke-width: 1.0;" width="63" x="774" y="2664.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="778" y="2681.3574">Q: code</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="778" y="2696.668">Q: scope</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="778" y="2711.9785">Q: state</text><polygon fill="#A80036" points="825.5,2756.3418,835.5,2760.3418,825.5,2764.3418,829.5,2760.3418" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="831.5" y1="2760.3418" y2="2760.3418"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="113" x="96.5" y="2740.2891">Get OAuth token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="96.5" y="2755.5996">POST /connect/token</text><rect fill="#FBFB77" height="130" style="stroke: #A80036; stroke-width: 1.0;" width="192" x="94" y="2773.3418"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="98" y="2789.9102">H: X-ConsentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="98" y="2805.2207">H: X-ConsentAuthorisationId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="98" y="2820.5313">B: client_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="98" y="2835.8418">B: client_secret</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="98" y="2851.1523">B: code</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="98" y="2866.4629">B: redirect_uri</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="98" y="2881.7734">B: grant_type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="98" y="2897.084">B: scope</text><polygon fill="#A80036" points="100.5,2935.8262,90.5,2939.8262,100.5,2943.8262,96.5,2939.8262" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="94.5" x2="841.5" y1="2939.8262" y2="2939.8262"/><rect fill="#FBFB77" height="84" style="stroke: #A80036; stroke-width: 1.0;" width="108" x="729" y="2952.8262"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="733" y="2969.3945">HTTP 200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="733" y="2984.7051">B: access_token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="733" y="3000.0156">B: expires_in</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="733" y="3015.3262">B: token_type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="733" y="3030.6367">B: scope</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1004.5" y1="3068.3789" y2="3068.3789"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="18" y="3079.0137">[scaRedirect]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="131.5" y1="3103.6445" y2="3103.6445"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="131.5" x2="131.5" y1="3103.6445" y2="3116.6445"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="90.5" x2="131.5" y1="3116.6445" y2="3116.6445"/><polygon fill="#A80036" points="100.5,3112.6445,90.5,3116.6445,100.5,3120.6445,96.5,3116.6445" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="552" x="96.5" y="3098.9023">Process selectPsuAuthenticationMethodResponse._links.scaRedirect.href template</text><polygon fill="#A80036" points="825.5,3157.2656,835.5,3161.2656,825.5,3165.2656,829.5,3161.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="831.5" y1="3161.2656" y2="3161.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="96.5" y="3141.2129">Call authlink</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="96.5" y="3156.5234">GET /connect/authorize</text><rect fill="#FBFB77" height="99" style="stroke: #A80036; stroke-width: 1.0;" width="117" x="94" y="3174.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="98" y="3190.834">Q: client_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="98" y="3206.1445">Q: scope</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="98" y="3221.4551">Q: response_type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="98" y="3236.7656">Q: redirect_uri</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="98" y="3252.0762">Q: state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="98" y="3267.3867">Q: acr_values</text><polygon fill="#A80036" points="100.5,3296.4395,90.5,3300.4395,100.5,3304.4395,96.5,3300.4395" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="94.5" x2="841.5" y1="3300.4395" y2="3300.4395"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="106.5" y="3295.6973">Redirect to ASPSP</text><polygon fill="#A80036" points="949.5,3325.75,959.5,3329.75,949.5,3333.75,953.5,3329.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="955.5" y1="3329.75" y2="3329.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="159" x="96.5" y="3325.0078">Follow authlink redirect</text><polygon fill="#A80036" points="949.5,3355.0605,959.5,3359.0605,949.5,3363.0605,953.5,3359.0605" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="955.5" y1="3359.0605" y2="3359.0605"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="51" y="3354.3184">Start PSU authentication</text><polygon fill="#A80036" points="50,3412.3711,40,3416.3711,50,3420.3711,46,3416.3711" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="960.5" y1="3416.3711" y2="3416.3711"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="56" y="3411.6289">End PSU authentication</text><polygon fill="#A80036" points="858.5,3441.6816,848.5,3445.6816,858.5,3449.6816,854.5,3445.6816" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="852.5" x2="965.5" y1="3445.6816" y2="3445.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="864.5" y="3440.9395">Auth result</text><polygon fill="#A80036" points="95.5,3486.3027,85.5,3490.3027,95.5,3494.3027,91.5,3490.3027" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="841.5" y1="3490.3027" y2="3490.3027"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="101.5" y="3470.25">TPP Callback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="101.5" y="3485.5605">GET [TPP Redirect URI]</text><rect fill="#FBFB77" height="38" style="stroke: #A80036; stroke-width: 1.0;" width="63" x="774" y="3503.3027"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="778" y="3519.8711">Q: scope</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="778" y="3535.1816">Q: state</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1004.5" y1="3572.9238" y2="3572.9238"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="18" y="3583.5586">[decoupled]</text><path d="M55,3593.8789 L129,3593.8789 L129,3600.8789 L119,3610.8789 L55,3610.8789 L55,3593.8789 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="284.416" style="stroke: #000000; stroke-width: 2.0;" width="701.5" x="55" y="3593.8789"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="70" y="3607.4473">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="404" x="144" y="3606.5137">[until scaStatusResponse.scaStatus = "finalised", "failed" or "exempted"]</text><polygon fill="#A80036" points="643.5,3668.8105,653.5,3672.8105,643.5,3676.8105,647.5,3672.8105" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="649.5" y1="3672.8105" y2="3672.8105"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="264" x="96.5" y="3652.7578">Read Consent Authorisation SCA Status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="547" x="96.5" y="3668.0684">GET /psd2/consent/v1/consents/{consentId}/authorisations/{consentAuthorisationId}</text><rect fill="#FBFB77" height="84" style="stroke: #A80036; stroke-width: 1.0;" width="171" x="94" y="3685.8105"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="3702.3789">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="98" y="3717.6895">P: consentAuthorisationId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="98" y="3733">H: Authorization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="3748.3105">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="3763.6211">H: X-BicFi</text><polygon fill="#A80036" points="95.5,3802.3633,85.5,3806.3633,95.5,3810.3633,91.5,3806.3633" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="659.5" y1="3806.3633" y2="3806.3633"/><rect fill="#FBFB77" height="53" style="stroke: #A80036; stroke-width: 1.0;" width="143" x="512" y="3819.3633"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="516" y="3835.9316">HTTP 200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="516" y="3851.2422">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="516" y="3866.5527">B: scaStatusResponse</text><polygon fill="#A80036" points="643.5,3974.916,653.5,3978.916,643.5,3982.916,647.5,3978.916" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="649.5" y1="3978.916" y2="3978.916"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="96.5" y="3958.8633">Delete Consent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="96.5" y="3974.1738">GET /psd2/consent/v1/consents/{consentId}</text><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="94" y="3991.916"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="4008.4844">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="98" y="4023.7949">H: Authorization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="4039.1055">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="4054.416">H: X-BicFi</text><polygon fill="#A80036" points="95.5,4093.1582,85.5,4097.1582,95.5,4101.1582,91.5,4097.1582" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="659.5" y1="4097.1582" y2="4097.1582"/><rect fill="#FBFB77" height="38" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="541" y="4110.1582"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="545" y="4126.7266">HTTP 204</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="545" y="4142.0371">H: X-Request-ID</text><!--
@startuml

skinparam shadowing false

title Consent Service

actor "PSU" as psu
participant "TPP" as tpp
participant "Open Banking Platform\nAPI" as obpapi
participant "Open Banking Platform\nAuth" as obpauth
participant "ASPSP" as aspsp


tpp -> obpauth: **Get Token**\nPOST /connect/token
activate tpp
rnote right of tpp
B: client_id
B: client_secret
B: grant_type
B: scope
endrnote
activate obpauth
|||
obpauth - -> tpp:
deactivate obpauth
rnote left of obpauth
HTTP 200
B: access_token
B: expires_in
B: token_type
B: scope
endrnote
deactivate tpp

|||

tpp -> obpapi: **Create Consent**\nPOST /psd2/consent/v1/consents
activate tpp
rnote right of tpp
H: Authorization
H: X-Request-ID
H: X-BicFi
B: consents
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
rnote left of obpapi
HTTP 201
H: X-Request-ID
B: consentsResponse-201
endrnote
deactivate tpp

|||

tpp -> obpapi: **Get Consent Request**\nGET /psd2/consent/v1/consents/{consentId}
activate tpp
rnote right of tpp
P: consentId
H: Authorization
H: X-Request-ID
H: X-BicFi
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
rnote left of obpapi
HTTP 200
H: X-Request-ID
B: consentInformationResponse-200_json
endrnote
deactivate tpp

|||

tpp -> obpapi: **Consent Status Request**\nGET /psd2/consent/v1/consents/{consentId}/status
activate tpp
rnote right of tpp
P: consentId
H: Authorization
H: X-Request-ID
H: X-BicFi
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
rnote left of obpapi
HTTP 200
H: X-Request-ID
B: consentStatusResponse-200
endrnote
deactivate tpp

|||

tpp -> obpapi: **Start Consent Authorisation Process**\nPOST /psd2/consent/v1/consents/{consentId}/authorisations
activate tpp
rnote right of tpp
P: consentId
H: Authorization
H: X-Request-ID
H: X-BicFi
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
rnote left of obpapi
HTTP 201
H: X-Request-ID
H: ASPSP-SCA-Approach
B: startScaprocessResponse
endrnote
deactivate tpp

|||

tpp -> obpapi: **Get Consent Authorisation Sub-Resources Request**\nGET /psd2/consent/v1/consents/{consentId}/authorisations
activate tpp
rnote right of tpp
P: consentId
H: Authorization
H: X-Request-ID
H: X-BicFi
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
rnote left of obpapi
HTTP 200
H: X-Request-ID
B: authorisations
endrnote
deactivate tpp

|||

tpp -> obpapi: **Read Consent Authorisation SCA Status**\nGET /psd2/consent/v1/consents/{consentId}/authorisations/{consentAuthorisationId}
activate tpp
rnote right of tpp
P: consentId
P: consentAuthorisationId
H: Authorization
H: X-Request-ID
H: X-BicFi
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
rnote left of obpapi
HTTP 200
H: X-Request-ID
B: scaStatusResponse
endrnote
deactivate tpp

|||

tpp -> obpapi: **Update PSU Data**\nPUT /psd2/consent/v1/consents/{consentId}/authorisations/{consentAuthorisationId}
activate tpp
rnote right of tpp
P: consentId
P: consentAuthorisationId
H: Authorization
H: X-Request-ID
H: X-BicFi
B: selectPsuAuthenticationMethod
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
rnote left of obpapi
HTTP 200
H: X-Request-ID
H: ASPSP-SCA-Approach
B: selectPsuAuthenticationMethodResponse
endrnote


alt scaOAuth

tpp -> tpp: **Process selectPsuAuthenticationMethodResponse._links.scaOAuth.href template**

tpp -> obpauth: **Call authlink**\nGET /connect/authorize
activate obpauth
rnote right of tpp
Q: client_id
Q: scope
Q: response_type
Q: redirect_uri
Q: state
Q: acr_values
endrnote
obpauth - -> tpp: **Redirect to ASPSP**
deactivate obpauth

tpp -> aspsp: **Follow authlink redirect**
activate aspsp

psu -> aspsp: **Start PSU authentication**
activate psu
...
aspsp -> psu: **End PSU authentication**
deactivate psu
aspsp -> obpauth: **Auth result**
deactivate aspsp
activate obpauth
obpauth -> tpp: **TPP Callback**\nGET [TPP Redirect URI]
rnote left of obpauth
Q: code
Q: scope
Q: state
endrnote

deactivate obpauth

tpp -> obpauth: **Get OAuth token**\nPOST /connect/token
activate obpauth
rnote right of tpp
H: X-ConsentId
H: X-ConsentAuthorisationId
B: client_id
B: client_secret
B: code
B: redirect_uri
B: grant_type
B: scope
endrnote
|||
obpauth - -> tpp:
deactivate obpauth
rnote left of obpauth
HTTP 200
B: access_token
B: expires_in
B: token_type
B: scope
endrnote

|||

else scaRedirect

tpp -> tpp: **Process selectPsuAuthenticationMethodResponse._links.scaRedirect.href template**

tpp -> obpauth: **Call authlink**\nGET /connect/authorize
activate obpauth
rnote right of tpp
Q: client_id
Q: scope
Q: response_type
Q: redirect_uri
Q: state
Q: acr_values
endrnote
obpauth - -> tpp: **Redirect to ASPSP**
deactivate obpauth

tpp -> aspsp: **Follow authlink redirect**
activate aspsp

psu -> aspsp: **Start PSU authentication**
activate psu
...
aspsp -> psu: **End PSU authentication**
deactivate psu
aspsp -> obpauth: **Auth result**
deactivate aspsp
activate obpauth
obpauth -> tpp: **TPP Callback**\nGET [TPP Redirect URI]
rnote left of obpauth
Q: scope
Q: state
endrnote

deactivate obpauth
deactivate tpp
|||

else decoupled

loop until scaStatusResponse.scaStatus = "finalised", "failed" or "exempted"
|||
tpp -> obpapi: **Read Consent Authorisation SCA Status**\nGET /psd2/consent/v1/consents/{consentId}/authorisations/{consentAuthorisationId}
activate tpp
rnote right of tpp
P: consentId
P: consentAuthorisationId
H: Authorization
H: X-Request-ID
H: X-BicFi
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
deactivate tpp
rnote left of obpapi
HTTP 200
H: X-Request-ID
B: scaStatusResponse
endrnote
end
|||
end

|||

tpp -> obpapi: **Delete Consent**\nGET /psd2/consent/v1/consents/{consentId}
activate tpp
rnote right of tpp
P: consentId
H: Authorization
H: X-Request-ID
H: X-BicFi
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
deactivate tpp
rnote left of obpapi
HTTP 204
H: X-Request-ID
endrnote

@enduml

PlantUML version 1.2019.09(Mon Aug 26 18:19:51 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 12.0.2+10
Operating System: Mac OS X
OS Version: 10.14.6
Default Encoding: UTF-8
Language: en
Country: SE
--></g></svg>