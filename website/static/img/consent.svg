<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3771px" preserveAspectRatio="none" style="width:1011px;height:3771px;" version="1.1" viewBox="0 0 1011 3771" width="1011px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="8" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="2181.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="2181.1582" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="2181.1582" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="2181.1582" y2="2181.1582"/><rect fill="#FFFFFF" height="21.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="2217.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="2217.1582" y2="2238.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="2217.1582" y2="2238.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="2238.4688" y2="2238.4688"/><rect fill="#FFFFFF" height="8" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="2958.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="2958.4297" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="2958.4297" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="2958.4297" y2="2958.4297"/><rect fill="#FFFFFF" height="21.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="2994.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="2994.4297" y2="3015.7402"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="2994.4297" y2="3015.7402"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="3015.7402" y2="3015.7402"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="129.1094"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="332.2832"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="553.457"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="774.6309"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="995.8047"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="1216.9785"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="1438.1523"/><rect fill="#FFFFFF" height="514.5215" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="79.5" y="1674.6367"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="79.5" y1="1674.6367" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="89.5" y1="1674.6367" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="89.5" y1="1674.6367" y2="1674.6367"/><rect fill="#FFFFFF" height="749.2715" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="79.5" y="2217.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="79.5" y1="2217.1582" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="89.5" y1="2217.1582" y2="2966.4297"/><rect fill="#FFFFFF" height="95.2422" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="79.5" y="2994.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="79.5" y1="2994.4297" y2="3089.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="89.5" y1="2994.4297" y2="3089.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="89.5" y1="3089.6719" y2="3089.6719"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="3272.1797"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="3547.6641"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="332.2832"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="553.457"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="774.6309"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="995.8047"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="1216.9785"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="1438.1523"/><rect fill="#FFFFFF" height="148.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="1674.6367"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="3272.1797"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="3547.6641"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="832.5" y="129.1094"/><rect fill="#FFFFFF" height="139.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="832.5" y="1983.3633"/><rect fill="#FFFFFF" height="44.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="832.5" y="2267.7793"/><rect fill="#FFFFFF" height="179.4844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="832.5" y="2420.9531"/><rect fill="#FFFFFF" height="139.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="832.5" y="2760.6348"/><rect fill="#FFFFFF" height="44.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="832.5" y="3045.0508"/><rect fill="#FFFFFF" height="37.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="956.5" y="2151.8477"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="956.5" y1="2151.8477" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="966.5" y1="2151.8477" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="966.5" y1="2151.8477" y2="2151.8477"/><rect fill="#FFFFFF" height="50.6211" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="956.5" y="2217.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="956.5" y1="2217.1582" y2="2267.7793"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="966.5" y1="2217.1582" y2="2267.7793"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="966.5" y1="2267.7793" y2="2267.7793"/><rect fill="#FFFFFF" height="37.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="956.5" y="2929.1191"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="956.5" y1="2929.1191" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="966.5" y1="2929.1191" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="966.5" y1="2929.1191" y2="2929.1191"/><rect fill="#FFFFFF" height="50.6211" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="956.5" y="2994.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="956.5" y1="2994.4297" y2="3045.0508"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="966.5" y1="2994.4297" y2="3045.0508"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="966.5" y1="3045.0508" y2="3045.0508"/><rect fill="#FFFFFF" height="1591.9219" style="stroke: #000000; stroke-width: 2.0;" width="986.5" x="13" y="1887.1211"/><rect fill="#FFFFFF" height="504.5449" style="stroke: none; stroke-width: 1.0;" width="986.5" x="13" y="2666.748"/><rect fill="#FFFFFF" height="307.75" style="stroke: none; stroke-width: 1.0;" width="986.5" x="13" y="3171.293"/><rect fill="#FFFFFF" height="253.7949" style="stroke: #000000; stroke-width: 2.0;" width="696.5" x="55" y="3193.248"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39" x2="39" y1="82.4883" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="39" x2="39" y1="2189.1582" y2="2217.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39" x2="39" y1="2217.1582" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="39" x2="39" y1="2966.4297" y2="2994.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39" x2="39" y1="2994.4297" y2="3683.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="84" x2="84" y1="82.4883" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="84" x2="84" y1="2189.1582" y2="2217.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="84" x2="84" y1="2217.1582" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="84" x2="84" y1="2966.4297" y2="2994.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="84" x2="84" y1="2994.4297" y2="3683.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="655.5" x2="655.5" y1="82.4883" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="655.5" x2="655.5" y1="2189.1582" y2="2217.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="655.5" x2="655.5" y1="2217.1582" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="655.5" x2="655.5" y1="2966.4297" y2="2994.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="655.5" x2="655.5" y1="2994.4297" y2="3683.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="837.5" x2="837.5" y1="82.4883" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="837.5" x2="837.5" y1="2189.1582" y2="2217.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="837.5" x2="837.5" y1="2217.1582" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="837.5" x2="837.5" y1="2966.4297" y2="2994.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="837.5" x2="837.5" y1="2994.4297" y2="3683.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="961.5" y1="82.4883" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="961.5" x2="961.5" y1="2189.1582" y2="2217.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="961.5" y1="2217.1582" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="961.5" x2="961.5" y1="2966.4297" y2="2994.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="961.5" y1="2994.4297" y2="3683.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="23" y="79.5352">PSU</text><ellipse cx="39" cy="13" fill="#FEFECE" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M39,21 L39,48 M26,29 L52,29 M39,48 L26,63 M39,48 L52,63 " fill="none" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="23" y="3696.4414">PSU</text><ellipse cx="39" cy="3709.3945" fill="#FEFECE" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M39,3717.3945 L39,3744.3945 M26,3725.3945 L52,3725.3945 M39,3744.3945 L26,3759.3945 M39,3744.3945 L52,3759.3945 " fill="none" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="39" x="65" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="25" x="72" y="71.5352">TPP</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="39" x="65" y="3682.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="25" x="72" y="3703.4414">TPP</text><rect fill="#FEFECE" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="172" x="569.5" y="34.5117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="158" x="576.5" y="55.0469">Open Banking Platform</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="22" x="644.5" y="71.5352">API</text><rect fill="#FEFECE" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="172" x="569.5" y="3682.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="158" x="576.5" y="3703.4414">Open Banking Platform</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="22" x="644.5" y="3719.9297">API</text><rect fill="#FEFECE" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="172" x="751.5" y="34.5117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="158" x="758.5" y="55.0469">Open Banking Platform</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="821" y="71.5352">Auth</text><rect fill="#FEFECE" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="172" x="751.5" y="3682.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="158" x="758.5" y="3703.4414">Open Banking Platform</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="821" y="3719.9297">Auth</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="933.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="940.5" y="71.5352">ASPSP</text><rect fill="#FEFECE" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="933.5" y="3682.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="940.5" y="3703.4414">ASPSP</text><rect fill="#FFFFFF" height="8" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="2181.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="2181.1582" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="2181.1582" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="2181.1582" y2="2181.1582"/><rect fill="#FFFFFF" height="21.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="2217.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="2217.1582" y2="2238.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="2217.1582" y2="2238.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="2238.4688" y2="2238.4688"/><rect fill="#FFFFFF" height="8" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="2958.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="2958.4297" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="2958.4297" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="2958.4297" y2="2958.4297"/><rect fill="#FFFFFF" height="21.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="34" y="2994.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="34" y1="2994.4297" y2="3015.7402"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="44" y1="2994.4297" y2="3015.7402"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="44" y1="3015.7402" y2="3015.7402"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="129.1094"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="332.2832"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="553.457"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="774.6309"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="995.8047"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="1216.9785"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="1438.1523"/><rect fill="#FFFFFF" height="514.5215" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="79.5" y="1674.6367"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="79.5" y1="1674.6367" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="89.5" y1="1674.6367" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="89.5" y1="1674.6367" y2="1674.6367"/><rect fill="#FFFFFF" height="749.2715" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="79.5" y="2217.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="79.5" y1="2217.1582" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="89.5" y1="2217.1582" y2="2966.4297"/><rect fill="#FFFFFF" height="95.2422" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="79.5" y="2994.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="79.5" y1="2994.4297" y2="3089.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="89.5" y1="2994.4297" y2="3089.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="89.5" y1="3089.6719" y2="3089.6719"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="3272.1797"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="79.5" y="3547.6641"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="332.2832"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="553.457"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="774.6309"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="995.8047"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="1216.9785"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="1438.1523"/><rect fill="#FFFFFF" height="148.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="1674.6367"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="3272.1797"/><rect fill="#FFFFFF" height="118.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="3547.6641"/><rect fill="#FFFFFF" height="133.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="832.5" y="129.1094"/><rect fill="#FFFFFF" height="139.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="832.5" y="1983.3633"/><rect fill="#FFFFFF" height="44.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="832.5" y="2267.7793"/><rect fill="#FFFFFF" height="179.4844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="832.5" y="2420.9531"/><rect fill="#FFFFFF" height="139.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="832.5" y="2760.6348"/><rect fill="#FFFFFF" height="44.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="832.5" y="3045.0508"/><rect fill="#FFFFFF" height="37.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="956.5" y="2151.8477"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="956.5" y1="2151.8477" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="966.5" y1="2151.8477" y2="2189.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="966.5" y1="2151.8477" y2="2151.8477"/><rect fill="#FFFFFF" height="50.6211" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="956.5" y="2217.1582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="956.5" y1="2217.1582" y2="2267.7793"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="966.5" y1="2217.1582" y2="2267.7793"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="966.5" y1="2267.7793" y2="2267.7793"/><rect fill="#FFFFFF" height="37.3105" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="956.5" y="2929.1191"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="956.5" y1="2929.1191" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="966.5" y1="2929.1191" y2="2966.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="966.5" y1="2929.1191" y2="2929.1191"/><rect fill="#FFFFFF" height="50.6211" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="956.5" y="2994.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="956.5" y1="2994.4297" y2="3045.0508"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="966.5" y1="2994.4297" y2="3045.0508"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="956.5" x2="966.5" y1="3045.0508" y2="3045.0508"/><polygon fill="#A80036" points="820.5,125.1094,830.5,129.1094,820.5,133.1094,824.5,129.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="826.5" y1="129.1094" y2="129.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="69" x="96.5" y="109.0566">Get Token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="96.5" y="124.3672">POST /connect/token</text><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="103" x="94" y="142.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="98" y="158.6777">B: client_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="98" y="173.9883">B: client_secret</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="98" y="189.2988">B: grant_type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="98" y="204.6094">B: scope</text><polygon fill="#A80036" points="95.5,258.6621,85.5,262.6621,95.5,266.6621,91.5,262.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="836.5" y1="262.6621" y2="262.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="101.5" y="257.9199">access_token</text><polygon fill="#A80036" points="638.5,328.2832,648.5,332.2832,638.5,336.2832,642.5,332.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="644.5" y1="332.2832" y2="332.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103" x="96.5" y="312.2305">Create Consent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="96.5" y="327.541">POST /psd2/consent/v1/consents</text><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="94" y="345.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="98" y="361.8516">H: access_token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="377.1621">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="392.4727">H: X-BicFi</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="98" y="407.7832">B: consents</text><polygon fill="#A80036" points="95.5,446.5254,85.5,450.5254,95.5,454.5254,91.5,450.5254" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="654.5" y1="450.5254" y2="450.5254"/><rect fill="#FBFB77" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="125" x="525" y="463.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="529" y="480.0938">consentsResponse</text><polygon fill="#A80036" points="638.5,549.457,648.5,553.457,638.5,557.457,642.5,553.457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="644.5" y1="553.457" y2="553.457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="96.5" y="533.4043">Get Consent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="96.5" y="548.7148">GET /psd2/consent/v1/consents/{consentId}</text><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="94" y="566.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="583.0254">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="98" y="598.3359">H: access_token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="613.6465">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="628.957">H: X-BicFi</text><polygon fill="#A80036" points="95.5,667.6992,85.5,671.6992,95.5,675.6992,91.5,671.6992" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="654.5" y1="671.6992" y2="671.6992"/><rect fill="#FBFB77" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="192" x="458" y="684.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="462" y="701.2676">consentInformationResponse</text><polygon fill="#A80036" points="638.5,770.6309,648.5,774.6309,638.5,778.6309,642.5,774.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="644.5" y1="774.6309" y2="774.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="96.5" y="754.5781">Get Consent Status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="332" x="96.5" y="769.8887">GET /psd2/consent/v1/consents/{consentId}/status</text><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="94" y="787.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="804.1992">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="98" y="819.5098">H: access_token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="834.8203">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="850.1309">H: X-BicFi</text><polygon fill="#A80036" points="95.5,888.873,85.5,892.873,95.5,896.873,91.5,892.873" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="654.5" y1="892.873" y2="892.873"/><rect fill="#FBFB77" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="157" x="493" y="905.873"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="497" y="922.4414">consentStatusResponse</text><polygon fill="#A80036" points="638.5,991.8047,648.5,995.8047,638.5,999.8047,642.5,995.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="644.5" y1="995.8047" y2="995.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="299" x="96.5" y="975.752">Start the authorisation process for a consent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="392" x="96.5" y="991.0625">POST /psd2/consent/v1/consents/{consentId}/authorisations</text><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="94" y="1008.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="1025.373">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="98" y="1040.6836">H: access_token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="1055.9941">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="1071.3047">H: X-BicFi</text><polygon fill="#A80036" points="95.5,1110.0469,85.5,1114.0469,95.5,1118.0469,91.5,1114.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="654.5" y1="1114.0469" y2="1114.0469"/><rect fill="#FBFB77" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="167" x="483" y="1127.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="487" y="1143.6152">startScaprocessResponse</text><polygon fill="#A80036" points="638.5,1212.9785,648.5,1216.9785,638.5,1220.9785,642.5,1216.9785" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="644.5" y1="1216.9785" y2="1216.9785"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="343" x="96.5" y="1196.9258">Get Consent Authorisation Sub-Resources Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="384" x="96.5" y="1212.2363">GET /psd2/consent/v1/consents/{consentId}/authorisations</text><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="94" y="1229.9785"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="1246.5469">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="98" y="1261.8574">H: access_token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="1277.168">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="1292.4785">H: X-BicFi</text><polygon fill="#A80036" points="95.5,1331.2207,85.5,1335.2207,95.5,1339.2207,91.5,1335.2207" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="654.5" y1="1335.2207" y2="1335.2207"/><rect fill="#FBFB77" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="99" x="551" y="1348.2207"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="555" y="1364.7891">authorisations</text><polygon fill="#A80036" points="638.5,1434.1523,648.5,1438.1523,638.5,1442.1523,642.5,1438.1523" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="644.5" y1="1438.1523" y2="1438.1523"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="329" x="96.5" y="1418.0996">Read the SCA status of the consent authorisation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="547" x="96.5" y="1433.4102">GET /psd2/consent/v1/consents/{consentId}/authorisations/{consentAuthorisationId}</text><rect fill="#FBFB77" height="84" style="stroke: #A80036; stroke-width: 1.0;" width="171" x="94" y="1451.1523"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="1467.7207">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="98" y="1483.0313">P: consentAuthorisationId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="98" y="1498.3418">H: access_token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="1513.6523">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="1528.9629">H: X-BicFi</text><polygon fill="#A80036" points="95.5,1567.7051,85.5,1571.7051,95.5,1575.7051,91.5,1571.7051" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="654.5" y1="1571.7051" y2="1571.7051"/><rect fill="#FBFB77" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="128" x="522" y="1584.7051"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="526" y="1601.2734">scaStatusResponse</text><polygon fill="#A80036" points="638.5,1670.6367,648.5,1674.6367,638.5,1678.6367,642.5,1674.6367" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="644.5" y1="1674.6367" y2="1674.6367"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="200" x="96.5" y="1654.584">Update PSU Data for consents</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="547" x="96.5" y="1669.8945">PUT /psd2/consent/v1/consents/{consentId}/authorisations/{consentAuthorisationId}</text><rect fill="#FBFB77" height="99" style="stroke: #A80036; stroke-width: 1.0;" width="173" x="94" y="1687.6367"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="1704.2051">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="98" y="1719.5156">P: consentAuthorisationId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="98" y="1734.8262">H: access_token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="1750.1367">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="1765.4473">H: X-BicFi</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="98" y="1780.7578">B: authenticationMethodId</text><polygon fill="#A80036" points="100.5,1819.5,90.5,1823.5,100.5,1827.5,96.5,1823.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="94.5" x2="654.5" y1="1823.5" y2="1823.5"/><rect fill="#FBFB77" height="38" style="stroke: #A80036; stroke-width: 1.0;" width="164" x="486" y="1836.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="490" y="1853.0684">H: ASPSP-SCA-Approach</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="490" y="1868.3789">B: _links</text><path d="M13,1887.1211 L75,1887.1211 L75,1894.1211 L65,1904.1211 L13,1904.1211 L13,1887.1211 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1591.9219" style="stroke: #000000; stroke-width: 2.0;" width="986.5" x="13" y="1887.1211"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="28" y="1900.6895">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="90" y="1899.7559">[scaOAuth]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="131.5" y1="1925.7422" y2="1925.7422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="131.5" x2="131.5" y1="1925.7422" y2="1938.7422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="90.5" x2="131.5" y1="1938.7422" y2="1938.7422"/><polygon fill="#A80036" points="100.5,1934.7422,90.5,1938.7422,100.5,1942.7422,96.5,1938.7422" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="175" x="96.5" y="1921">Process authlink template</text><polygon fill="#A80036" points="820.5,1979.3633,830.5,1983.3633,820.5,1987.3633,824.5,1983.3633" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="826.5" y1="1983.3633" y2="1983.3633"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="96.5" y="1963.3105">Call authlink</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="96.5" y="1978.6211">GET /connect/authorize</text><rect fill="#FBFB77" height="99" style="stroke: #A80036; stroke-width: 1.0;" width="117" x="94" y="1996.3633"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="98" y="2012.9316">Q: client_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="98" y="2028.2422">Q: scope</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="98" y="2043.5527">Q: response_type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="98" y="2058.8633">Q: redirect_uri</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="98" y="2074.1738">Q: state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="98" y="2089.4844">Q: acr_values</text><polygon fill="#A80036" points="100.5,2118.5371,90.5,2122.5371,100.5,2126.5371,96.5,2122.5371" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="94.5" x2="836.5" y1="2122.5371" y2="2122.5371"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="106.5" y="2117.7949">Redirect to ASPSP</text><polygon fill="#A80036" points="944.5,2147.8477,954.5,2151.8477,944.5,2155.8477,948.5,2151.8477" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="950.5" y1="2151.8477" y2="2151.8477"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="159" x="96.5" y="2147.1055">Follow authlink redirect</text><polygon fill="#A80036" points="944.5,2177.1582,954.5,2181.1582,944.5,2185.1582,948.5,2181.1582" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="950.5" y1="2181.1582" y2="2181.1582"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="51" y="2176.416">Start PSU authentication</text><polygon fill="#A80036" points="50,2234.4688,40,2238.4688,50,2242.4688,46,2238.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="955.5" y1="2238.4688" y2="2238.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="56" y="2233.7266">End PSU authentication</text><polygon fill="#A80036" points="853.5,2263.7793,843.5,2267.7793,853.5,2271.7793,849.5,2267.7793" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="847.5" x2="960.5" y1="2267.7793" y2="2267.7793"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="859.5" y="2263.0371">Auth result</text><polygon fill="#A80036" points="100.5,2308.4004,90.5,2312.4004,100.5,2316.4004,96.5,2312.4004" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="94.5" x2="836.5" y1="2312.4004" y2="2312.4004"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="106.5" y="2292.3477">TPP Callback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="106.5" y="2307.6582">GET [TPP Redirect URI]</text><rect fill="#FBFB77" height="53" style="stroke: #A80036; stroke-width: 1.0;" width="63" x="769" y="2325.4004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="773" y="2341.9688">Q: code</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="773" y="2357.2793">Q: scope</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="773" y="2372.5898">Q: state</text><polygon fill="#A80036" points="820.5,2416.9531,830.5,2420.9531,820.5,2424.9531,824.5,2420.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="826.5" y1="2420.9531" y2="2420.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="113" x="96.5" y="2400.9004">Get OAuth token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="96.5" y="2416.2109">POST /connect/token</text><rect fill="#FBFB77" height="130" style="stroke: #A80036; stroke-width: 1.0;" width="192" x="94" y="2433.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="98" y="2450.5215">H: X-ConsentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="98" y="2465.832">H: X-ConsentAuthorisationId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="98" y="2481.1426">B: client_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="98" y="2496.4531">B: client_secret</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="98" y="2511.7637">B: code</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="98" y="2527.0742">B: redirect_uri</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="98" y="2542.3848">B: grant_type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="98" y="2557.6953">B: scope</text><polygon fill="#A80036" points="100.5,2596.4375,90.5,2600.4375,100.5,2604.4375,96.5,2600.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="94.5" x2="836.5" y1="2600.4375" y2="2600.4375"/><rect fill="#FBFB77" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="108" x="724" y="2613.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="728" y="2630.0059">B: access_token</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="999.5" y1="2667.748" y2="2667.748"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="18" y="2678.3828">[scaRedirect]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="131.5" y1="2703.0137" y2="2703.0137"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="131.5" x2="131.5" y1="2703.0137" y2="2716.0137"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="90.5" x2="131.5" y1="2716.0137" y2="2716.0137"/><polygon fill="#A80036" points="100.5,2712.0137,90.5,2716.0137,100.5,2720.0137,96.5,2716.0137" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="175" x="96.5" y="2698.2715">Process authlink template</text><polygon fill="#A80036" points="820.5,2756.6348,830.5,2760.6348,820.5,2764.6348,824.5,2760.6348" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="826.5" y1="2760.6348" y2="2760.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="96.5" y="2740.582">Call authlink</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="96.5" y="2755.8926">GET /connect/authorize</text><rect fill="#FBFB77" height="99" style="stroke: #A80036; stroke-width: 1.0;" width="117" x="94" y="2773.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="98" y="2790.2031">Q: client_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="98" y="2805.5137">Q: scope</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="98" y="2820.8242">Q: response_type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="98" y="2836.1348">Q: redirect_uri</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="98" y="2851.4453">Q: state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="98" y="2866.7559">Q: acr_values</text><polygon fill="#A80036" points="100.5,2895.8086,90.5,2899.8086,100.5,2903.8086,96.5,2899.8086" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="94.5" x2="836.5" y1="2899.8086" y2="2899.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="106.5" y="2895.0664">Redirect to ASPSP</text><polygon fill="#A80036" points="944.5,2925.1191,954.5,2929.1191,944.5,2933.1191,948.5,2929.1191" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="950.5" y1="2929.1191" y2="2929.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="159" x="96.5" y="2924.377">Follow authlink redirect</text><polygon fill="#A80036" points="944.5,2954.4297,954.5,2958.4297,944.5,2962.4297,948.5,2958.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="950.5" y1="2958.4297" y2="2958.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="51" y="2953.6875">Start PSU authentication</text><polygon fill="#A80036" points="50,3011.7402,40,3015.7402,50,3019.7402,46,3015.7402" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="955.5" y1="3015.7402" y2="3015.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="56" y="3010.998">End PSU authentication</text><polygon fill="#A80036" points="853.5,3041.0508,843.5,3045.0508,853.5,3049.0508,849.5,3045.0508" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="847.5" x2="960.5" y1="3045.0508" y2="3045.0508"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="859.5" y="3040.3086">Auth result</text><polygon fill="#A80036" points="95.5,3085.6719,85.5,3089.6719,95.5,3093.6719,91.5,3089.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="836.5" y1="3089.6719" y2="3089.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="101.5" y="3069.6191">TPP Callback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="101.5" y="3084.9297">GET [TPP Redirect URI]</text><rect fill="#FBFB77" height="38" style="stroke: #A80036; stroke-width: 1.0;" width="63" x="769" y="3102.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="773" y="3119.2402">Q: scope</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="773" y="3134.5508">Q: state</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="999.5" y1="3172.293" y2="3172.293"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="18" y="3182.9277">[decoupled]</text><path d="M55,3193.248 L129,3193.248 L129,3200.248 L119,3210.248 L55,3210.248 L55,3193.248 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="253.7949" style="stroke: #000000; stroke-width: 2.0;" width="696.5" x="55" y="3193.248"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="70" y="3206.8164">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="144" y="3205.8828">[until final auth status]</text><polygon fill="#A80036" points="638.5,3268.1797,648.5,3272.1797,638.5,3276.1797,642.5,3272.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="644.5" y1="3272.1797" y2="3272.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="329" x="96.5" y="3252.127">Read the SCA status of the consent authorisation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="547" x="96.5" y="3267.4375">GET /psd2/consent/v1/consents/{consentId}/authorisations/{consentAuthorisationId}</text><rect fill="#FBFB77" height="84" style="stroke: #A80036; stroke-width: 1.0;" width="171" x="94" y="3285.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="3301.748">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="98" y="3317.0586">P: consentAuthorisationId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="98" y="3332.3691">H: access_token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="3347.6797">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="3362.9902">H: X-BicFi</text><polygon fill="#A80036" points="95.5,3401.7324,85.5,3405.7324,95.5,3409.7324,91.5,3405.7324" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="654.5" y1="3405.7324" y2="3405.7324"/><rect fill="#FBFB77" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="128" x="522" y="3418.7324"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="526" y="3435.3008">scaStatusResponse</text><polygon fill="#A80036" points="638.5,3543.6641,648.5,3547.6641,638.5,3551.6641,642.5,3547.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="644.5" y1="3547.6641" y2="3547.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="96.5" y="3527.6113">Delete Consent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="96.5" y="3542.9219">GET /psd2/consent/v1/consents/{consentId}</text><rect fill="#FBFB77" height="69" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="94" y="3560.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="98" y="3577.2324">P: consentId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="98" y="3592.543">H: access_token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="98" y="3607.8535">H: X-Request-ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="98" y="3623.1641">H: X-BicFi</text><polygon fill="#A80036" points="95.5,3661.9063,85.5,3665.9063,95.5,3669.9063,91.5,3665.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89.5" x2="654.5" y1="3665.9063" y2="3665.9063"/><!--MD5=[aa6bc87895902cf7e7940308bc2c2ad4]
@startuml

skinparam shadowing false


actor "PSU" as psu
participant "TPP" as tpp
participant "Open Banking Platform\nAPI" as obpapi
participant "Open Banking Platform\nAuth" as obpauth
participant "ASPSP" as aspsp


tpp -> obpauth: **Get Token**\nPOST /connect/token
activate tpp
rnote right of tpp
B: client_id
B: client_secret
B: grant_type
B: scope
endrnote
activate obpauth
|||
obpauth - -> tpp: access_token
deactivate obpauth
rnote left of obpauth
endrnote
deactivate tpp

|||

tpp -> obpapi: **Create Consent**\nPOST /psd2/consent/v1/consents
activate tpp
rnote right of tpp
H: access_token
H: X-Request-ID
H: X-BicFi
B: consents
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
rnote left of obpapi
consentsResponse
endrnote
deactivate tpp

|||

tpp -> obpapi: **Get Consent**\nGET /psd2/consent/v1/consents/{consentId}
activate tpp
rnote right of tpp
P: consentId
H: access_token
H: X-Request-ID
H: X-BicFi
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
rnote left of obpapi
consentInformationResponse
endrnote
deactivate tpp

|||

tpp -> obpapi: **Get Consent Status**\nGET /psd2/consent/v1/consents/{consentId}/status
activate tpp
rnote right of tpp
P: consentId
H: access_token
H: X-Request-ID
H: X-BicFi
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
rnote left of obpapi
consentStatusResponse
endrnote
deactivate tpp

|||

tpp -> obpapi: **Start the authorisation process for a consent**\nPOST /psd2/consent/v1/consents/{consentId}/authorisations
activate tpp
rnote right of tpp
P: consentId
H: access_token
H: X-Request-ID
H: X-BicFi
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
rnote left of obpapi
startScaprocessResponse
endrnote
deactivate tpp

|||

tpp -> obpapi: **Get Consent Authorisation Sub-Resources Request**\nGET /psd2/consent/v1/consents/{consentId}/authorisations
activate tpp
rnote right of tpp
P: consentId
H: access_token
H: X-Request-ID
H: X-BicFi
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
rnote left of obpapi
authorisations
endrnote
deactivate tpp

|||

tpp -> obpapi: **Read the SCA status of the consent authorisation**\nGET /psd2/consent/v1/consents/{consentId}/authorisations/{consentAuthorisationId}
activate tpp
rnote right of tpp
P: consentId
P: consentAuthorisationId
H: access_token
H: X-Request-ID
H: X-BicFi
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
rnote left of obpapi
scaStatusResponse
endrnote
deactivate tpp

|||

tpp -> obpapi: **Update PSU Data for consents**\nPUT /psd2/consent/v1/consents/{consentId}/authorisations/{consentAuthorisationId}
activate tpp
rnote right of tpp
P: consentId
P: consentAuthorisationId
H: access_token
H: X-Request-ID
H: X-BicFi
B: authenticationMethodId
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
rnote left of obpapi
H: ASPSP-SCA-Approach
B: _links
endrnote


alt scaOAuth

tpp -> tpp: **Process authlink template**

tpp -> obpauth: **Call authlink**\nGET /connect/authorize
activate obpauth
rnote right of tpp
Q: client_id
Q: scope
Q: response_type
Q: redirect_uri
Q: state
Q: acr_values
endrnote
obpauth - -> tpp: **Redirect to ASPSP**
deactivate obpauth

tpp -> aspsp: **Follow authlink redirect**
activate aspsp

psu -> aspsp: **Start PSU authentication**
activate psu
...
aspsp -> psu: **End PSU authentication**
deactivate psu
aspsp -> obpauth: **Auth result**
deactivate aspsp
activate obpauth
obpauth -> tpp: **TPP Callback**\nGET [TPP Redirect URI]
rnote left of obpauth
Q: code
Q: scope
Q: state
endrnote

deactivate obpauth

tpp -> obpauth: **Get OAuth token**\nPOST /connect/token
activate obpauth
rnote right of tpp
H: X-ConsentId
H: X-ConsentAuthorisationId
B: client_id
B: client_secret
B: code
B: redirect_uri
B: grant_type
B: scope
endrnote
|||
obpauth - -> tpp:
deactivate obpauth

rnote left of obpauth
B: access_token
endrnote
|||

else scaRedirect

tpp -> tpp: **Process authlink template**

tpp -> obpauth: **Call authlink**\nGET /connect/authorize
activate obpauth
rnote right of tpp
Q: client_id
Q: scope
Q: response_type
Q: redirect_uri
Q: state
Q: acr_values
endrnote
obpauth - -> tpp: **Redirect to ASPSP**
deactivate obpauth

tpp -> aspsp: **Follow authlink redirect**
activate aspsp

psu -> aspsp: **Start PSU authentication**
activate psu
...
aspsp -> psu: **End PSU authentication**
deactivate psu
aspsp -> obpauth: **Auth result**
deactivate aspsp
activate obpauth
obpauth -> tpp: **TPP Callback**\nGET [TPP Redirect URI]
rnote left of obpauth
Q: scope
Q: state
endrnote

deactivate obpauth
deactivate tpp
|||

else decoupled

loop until final auth status
|||
tpp -> obpapi: **Read the SCA status of the consent authorisation**\nGET /psd2/consent/v1/consents/{consentId}/authorisations/{consentAuthorisationId}
activate tpp
rnote right of tpp
P: consentId
P: consentAuthorisationId
H: access_token
H: X-Request-ID
H: X-BicFi
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
deactivate tpp
rnote left of obpapi
scaStatusResponse
endrnote
end
|||
end

|||

tpp -> obpapi: **Delete Consent**\nGET /psd2/consent/v1/consents/{consentId}
activate tpp
rnote right of tpp
P: consentId
H: access_token
H: X-Request-ID
H: X-BicFi
endrnote
activate obpapi
|||
obpapi - -> tpp:
deactivate obpapi
deactivate tpp



@enduml

PlantUML version 1.2019.12(Sun Nov 03 11:24:54 CET 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 13+33
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: SE
--></g></svg>